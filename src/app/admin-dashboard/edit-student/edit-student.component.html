<div id="band" class="container">
  <!-- <ol class="breadcrumb">
    <li class="breadcrumb-item"><a >dashboard</a></li>
    <li class="breadcrumb-item"><a >Manage User</a></li>
    <li class="breadcrumb-item active">Edit Student</li>
  </ol> -->
  <div class="col-sm-3">
    <h2>Edit Student</h2>

    <div class="form-group">
      <div class="dropdown">
        <button class="form-control dropdown-toggle" type="button" data-toggle="dropdown">Select Departments
              <span class="caret"></span></button>
        <ul class="dropdown-menu">
          <li *ngFor='let department of departments'><a><input type="checkbox" [(ngModel)]="department.checked"
            (ngModelChange)="onDeptChange()" [disabled]="rollNo != ''"/>{{department.dept}}</a></li>
        </ul>
      </div>
    </div>

    <div class="form-group">
      <div class="dropdown">
        <button class="form-control dropdown-toggle" type="button" data-toggle="dropdown">Select Years
              <span class="caret"></span></button>
        <ul class="dropdown-menu">
          <li *ngFor='let year of years'><a><input type="checkbox" [(ngModel)]="year.checked" 
            (ngModelChange)="onYearChange()" [disabled]="rollNo != ''"/>{{year.year}}</a></li>
        </ul>
      </div>
    </div>


    <div class="form-group">
      <input class="form-control" placeholder="Roll Number" [(ngModel)]="rollNo" [disabled]="deptSelected || yearSelected" />Comma
      Separated ( , )
    </div>

    <button class="btn btn-info m-2" (click)="applyFilter()" [disabled]="rollNo == '' && !deptSelected && !yearSelected">Apply Filter</button>
    <button class="btn btn-info m-2" (click)="resetFilters()" [disabled]="rollNo == '' && !deptSelected && !yearSelected">Reset FIlters</button>

  </div>

  <div class="col-sm-12">
    <h2>List Of Students</h2>
    <div class="alert alert-danger" *ngIf="students.length == 0">No Students are available.</div>
    <table class="table-blue-bg table faculty-table table-responsive table-striped table-hover " cellspacing="0" cellpadding="3"
      rules="cols" *ngIf="students.length != 0">
      <tbody>
        <tr align="left">
          <!-- <th scope="col"><input type="checkbox" [(ngModel)]="filteredSelectAll" (ngModelChange)="filteredTableRowChecked('allrowsselected','filteredStudent')">Select
            all
          </th> -->
          <th scope="col">Student Name</th>
          <th scope="col">Roll Number</th>
          <th scope="col">Department</th>
          <th scope="col">Year &nbsp; &nbsp;&nbsp;&nbsp; </th>
          <th>Edit</th>
        </tr>
        <tr *ngFor="let student of students">
          <!-- <td align="center"><input type="checkbox" [(ngModel)]="student.checked" (ngModelChange)="filteredTableRowChecked('','filteredStudent')"></td> -->
          <td>
            {{student.firstName}} {{student.lastName}}
          </td>
          <td>
            {{student.rollNo}}
          </td>
          <td>
            {{student.department}}
          </td>
          <td>
            {{student.year}}
          </td>
          <td>

            <button type="button" class="pull-right btn btn-info btn-lg" data-toggle="modal" data-target="#myModal" (click)="edit(student._id)">Edit</button>

          </td>


        </tr>
      </tbody>
    </table>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Edit Student</h4>
      </div>
      <div class="modal-body">

        <!-- <form (ngSubmit)="onSubmit()" #editStudent="ngForm" [formGroup]="userForm">


          <div class="form-group">
            <label for="roll">Roll Number:</label>
            <input type="text" id="roll" class="form-control" formControlName="roll" [(ngModel)]="editStudent.rollNo" required>

            <div *ngIf="roll.invalid && (roll.dirty || roll.touched)" class="alert alert-danger">

              <div *ngIf="roll.errors.required">
                Roll Number is required.
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="email">Email:</label>
            <input type="text" id="email" class="form-control" formControlName="email" [(ngModel)]="editStudent.email" required>

            <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">

              <div *ngIf="email.errors.required">
                Email is required.
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="pwd">Password:</label>
            <input type="text" id="pwd" class="form-control" formControlName="pwd" [(ngModel)]="editedPassword" required>

            <div *ngIf="pwd.invalid && (pwd.dirty || pwd.touched)" class="alert alert-danger">

              <div *ngIf="pwd.errors.required">
                Password is required.
              </div>
            </div>
          </div>

          <div class="form-group">
            <div class="dropdown">
              <button class="form-control dropdown-toggle" type="button" data-toggle="dropdown">Enabled Labs
                              <span class="caret"></span></button>
              <ul class="dropdown-menu">
                <li *ngFor='let lab of labs'>
                  <a>
                  <input formControlName="labchecked" id="labchecked" type="checkbox" [(ngModel)]="lab.checked" (ngModelChange)="onLabsChange()"/>{{lab.name}}
                </a>
                </li>
              </ul>
            </div>
          </div>

          <div class="form-group">
            <div class="dropdown">
              <button class="form-control dropdown-toggle" type="button" data-toggle="dropdown">Enabled Courses
                              <span class="caret"></span></button>
              <ul class="dropdown-menu">
                <li *ngFor='let course of courses'>
                  <a>
                    <input formControlName="coursechecked" id="coursechecked" type="checkbox" [(ngModel)]="course.checked" (ngModelChange)="onCourseChange()"/>{{course.fullName}}
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <label for="status">Status - </label>
          <input formControlName="status" id="status" type="radio" value="activate" [(ngModel)]="activateStatus"> Activate
          <input formControlName="status" id="status" type="radio" value="deactivate" [(ngModel)]="activateStatus">Deactivate


          <button type="submit" class="btn btn-info m-2" style="padding: 10px 62px;" [disabled]="userForm.invalid">Submit</button>
        </form> -->
        
        <div style="display:inline-block">
          <label type="text">{{editStudent.firstName}}</label>
          <label type="text">{{editStudent.lastName}}</label>
          <label class="form-group form-control" type="text"> {{'D.O.B: '+editStudent.DOB}}</label>
          <label class="form-group form-control" type="text"> {{'Department: '+editStudent.department}}</label>
          <label class="form-group form-control" type="text"> {{'Mobile Number: '+editStudent.mobileNo}}</label>
          <label class="form-group form-control" type="text"> {{'Year: '+editStudent.year}}</label>
        </div>
        <div style="display:inline-block"><img [src]="imgSrc"></div>
        <label for="email">Email ID: </label>
        <input name="email" class="form-group form-control ng-valid required" type="email" placeholder="Email" [(ngModel)]="editStudent.email">
        <label for="roll">Roll NO: </label>
        <input name="roll" class="form-group form-control ng-valid required" type="text" placeholder="Roll No" [(ngModel)]="editStudent.rollNo">
        <!-- <input class="form-group form-control ng-valid required" type="text" placeholder="Password" [(ngModel)]="editedPassword"> -->

        <!-- <label class="form-group form-control" type="text"> Year</label> -->
        <!-- <label class="form-group form-control" type="text"> Department</label> -->
        <!-- <label class="form-group form-control" type="text"> Mobile Number</label> -->
        <!-- <label class="form-group form-control" type="text"> Profile Pic - need to show profile pic here</label> -->

        <div class="form-group">
          <div class="dropdown">
            <button class="form-control dropdown-toggle" type="button" data-toggle="dropdown">Enabled Labs
                  <span class="caret"></span></button>
            <ul class="dropdown-menu">
              <li *ngFor='let lab of labs'><a><input type="checkbox" [(ngModel)]="lab.checked"
                (ngModelChange)="onLabsChange()"/>{{lab.name}}</a></li>
            </ul>
          </div>
        </div>

        <div class="form-group">
          <div class="dropdown">
            <button class="form-control dropdown-toggle" type="button" data-toggle="dropdown">Enabled Courses
                  <span class="caret"></span></button>
            <ul class="dropdown-menu">
              <li *ngFor='let course of courses'><a><input type="checkbox" [(ngModel)]="course.checked"
                (ngModelChange)="onCourseChange()"/>{{course.fullName}}</a></li>
            </ul>
          </div>
        </div>

        Status - <input type="radio" name="status" value="activate" [(ngModel)]="activateStatus"> Activate
        <input type="radio" name="status" value="deactivate" [(ngModel)]="activateStatus">Deactivate

        <button type="submit" class="btn btn-info m-2" style="padding: 10px 62px;" (click)="onSubmit()">Submit</button>
        <div class="margin-top alert alert-success" *ngIf="submitted">
          <p>{{message}}</p>
        </div>
      </div>

    </div>

  </div>
</div>